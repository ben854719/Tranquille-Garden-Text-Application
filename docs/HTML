<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Accessibility Settings</title>
  <style>
    html {
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    #accessibility-settings {
      margin-bottom: 20px;
    }
    label {
      margin-right: 20px;
    }
    .chunkable {
      max-width: 600px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div id="accessibility-settings">
    <label for="font-select">Font:
      <select id="font-select" aria-label="Select font">
        <option value="Arial">Arial</option>
        <option value="OpenDyslexic">OpenDyslexic</option>
        <option value="Comic Sans MS">Comic Sans MS</option>
      </select>
    </label>
    <label for="theme-select">Theme:
      <select id="theme-select" aria-label="Select theme">
        <option value="light">Light</option>
        <option value="dark">Dark</option>
        <option value="high-contrast">High Contrast</option>
      </select>
    </label>
  </div>

  <div class="chunkable">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur...
  </div>

  <script>
    function applyFont(fontName) {
      document.body.style.fontFamily = `'${fontName}', sans-serif`;
      localStorage.setItem('preferredFont', fontName);
    }

    function applyTheme(themeName) {
      const root = document.documentElement;
      if (themeName === 'light') {
        root.style.backgroundColor = '#ffffff';
        root.style.color = '#000000';
      } else if (themeName === 'dark') {
        root.style.backgroundColor = '#121212';
        root.style.color = '#e0e0e0';
      } else if (themeName === 'high-contrast') {
        root.style.backgroundColor = '#000000';
        root.style.color = '#ffff00';
      }
      localStorage.setItem('preferredTheme', themeName);
    }

    function chunkText(selector, maxLength = 300) {
      const elements = document.querySelectorAll(selector);
      elements.forEach(el => {
        const text = el.textContent;
        if (text.length > maxLength) {
          const chunks = text.match(new RegExp(`.{1,${maxLength}}`, 'g'));
          el.innerHTML = chunks.map(chunk => `<p>${chunk}</p>`).join('');
        }
      });
    }

    document.getElementById('font-select').addEventListener('change', e => applyFont(e.target.value));
    document.getElementById('theme-select').addEventListener('change', e => applyTheme(e.target.value));

    // Load saved preferences
    const savedFont = localStorage.getItem('preferredFont');
    if (savedFont) applyFont(savedFont);

    const savedTheme = localStorage.getItem('preferredTheme');
    if (savedTheme) applyTheme(savedTheme);

    // Apply chunking
    chunkText('.chunkable');
  </script>
</body>
</html>
